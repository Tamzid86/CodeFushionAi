<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Country List</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f4f6f9;
            padding: 30px;
        }
        table img {
            height: 20px;
        }
    </style>
</head>
<body>

<div class="container">
    <h2 class="mb-4">Country List</h2>

    <input type="text" id="searchInput" class="form-control mb-3" placeholder="Search country by name...">

    <table class="table table-bordered table-hover">
        <thead>
            <tr>
                <th>Name</th>
                <th>CCA2</th>
                <th>Capital</th>
                <th>Population</th>
                <th>Timezone</th>
                <th>Flag</th>
            </tr>
        </thead>
        <tbody id="countryTable">
            <!-- Data will be inserted here via JavaScript -->
        </tbody>
    </table>
</div>

<script>
    let countryData = [];

    async function fetchCountries() {
        const res = await fetch('https://restcountries.com/v3.1/all');
        const data = await res.json();
        countryData = data;
        renderTable(data);
    }

    function renderTable(data) {
        const tableBody = document.getElementById("countryTable");
        tableBody.innerHTML = "";

        data.forEach(country => {
            const name = country.name?.common || "N/A";
            const cca2 = country.cca2 || "N/A";
            const capital = country.capital?.[0] || "N/A";
            const population = country.population?.toLocaleString() || "N/A";
            const timezone = country.timezones?.[0] || "N/A";
            const flagUrl = country.flags?.png || "";

            const row = `
                <tr>
                    <td>${name}</td>
                    <td>${cca2}</td>
                    <td>${capital}</td>
                    <td>${population}</td>
                    <td>${timezone}</td>
                    <td><img src="${flagUrl}" alt="flag"></td>
                </tr>
            `;
            tableBody.innerHTML += row;
        });
    }

    document.getElementById("searchInput").addEventListener("keyup", function () {
        const value = this.value.toLowerCase();
        const filtered = countryData.filter(c =>
            c.name?.common?.toLowerCase().includes(value)
        );
        renderTable(filtered);
    });

    fetchCountries();
</script>

</body>
</html>
